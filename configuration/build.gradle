plugins {
	id 'org.springframework.boot' version '3.1.0'
    id 'io.freefair.lombok' version '8.0.1'
	id 'org.graalvm.buildtools.native' version '0.9.20'
}

springBoot {
	mainClass = "com.rafanegrette.books.SophiBooksApplication"
}

dependencies {
    implementation project(':application')
    implementation project(':adapters:books-dynamodb')
	implementation project(':adapters:audio-files')
	implementation 'org.springframework.boot:spring-boot-starter:3.1.0'
	//developmentOnly 'org.springframework.boot:spring-boot-devtools:3.1.0'
    testImplementation 'org.springframework.boot:spring-boot-starter-test:3.1.0'
}

bootBuildImage {
	builder = 'paketobuildpacks/builder:tiny'
	environment = [
		'BP_NATIVE_IMAGE': 'true',
	    'BP_NATIVE_IMAGE_BUILD_ARGUMENTS': '--initialize-at-build-time=org.slf4j.LoggerFactory,com.ctc.wstx.api.ReaderConfig,com.ctc.wstx.api.CommonConfig,com.ctc.wstx.util.DefaultXmlSymbolTable,com.ctc.wstx.stax.WstxInputFactory',
		'BP_NATIVE_BUILD_MEMORY': '4G'
	]
}